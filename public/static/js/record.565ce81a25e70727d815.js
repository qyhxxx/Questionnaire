webpackJsonp([9],{"45aj":function(t,n,a){"use strict";function e(t){a("R3Hx")}Object.defineProperty(n,"__esModule",{value:!0});var i=a("XLwt"),o=a.n(i),r={data:function(){return{sttype:"",stnum:"",ischange:!1,stoptions:[],questionlist:[],qnid:"",requirements:[{qid:"",para:"",okey:[]}],charttype:"bar",cityList:[],optionslist:[],questiontopics:[],model11:"",model12:[],model13:"",charts:"",pp:[],opinionData:[],opinion1:["2017-07-09","2017-07-09","2017-07-09","2017-07-09"],opinionData1:[100,180,110,555],piedata:[]}},watch:{requirements:function(){console.log(999)}},beforeRouteEnter:function(t,n,a){a(function(n){n.$http.get("statistics/qnid/"+t.params.id+"/init").then(function(a){n.$store.commit("savetopic",a.body.questionnaire),n.cityList=a.body.questions,n.qnid=t.params.id})})},methods:{choose:function(t){var n=this;this.$http.get("statistics/qid/"+t+"/getOptions").then(function(t){n.optionslist=t.body.options})},change:function(t){var n=this;vm.$http.get("loginStatus").then(function(a){0===a.body.status?window.location.href="http://survey.twtstudio.com/api/login":n.$http.post("statistics/qid/"+t+"/data",{requirements:n.requirements}).then(function(t){console.log(t.body),n.model13=t.body.question,n.stoptions=t.body.statistics.statistics,n.ischange=!0,n.stnum=t.body.statistics.data.sum,0===t.body.qtype&&(n.sttype="单项选择"),1===t.body.qtype&&(n.sttype="多项选择");for(var a=t.body.statistics.statistics,e=[],i=[],o=[],r=0;r<a.length;r++)e[r]={value:a[r].count,name:a[r].okey},i[r]=a[r].okey,o[r]=a[r].count;n.piedata=e,n.pp=i,n.opinionData=o,n.$nextTick(function(){this.drawBar("bar"),this.drawPie("pie"),this.drawLine("line")})})})},addchoose:function(){this.requirements.push({qid:"",para:"",okey:[]})},delechoose:function(t){this.requirements.splice(t,1)},drawLine:function(t){this.charts=o.a.init(document.getElementById(t)),this.charts.setOption({xAxis:{type:"category",boundaryGap:!1,data:this.pp},yAxis:{splitLine:{show:!0},offset:100,interval:200},series:[{name:"访问来源",type:"line",data:this.opinionData,lineStyle:{normal:{color:"#00a1e9",width:1}},itemStyle:{normal:{color:"#00a1e9",borderWidth:4}},symbol:"circle",symbolSize:10,label:{normal:{show:!0,color:"#707070"}}}]})},drawBar:function(t){this.charts=o.a.init(document.getElementById(t)),this.charts.setOption({xAxis:{type:"category",boundaryGap:!1,axisLabel:{rotate:90,interval:0,color:"#707070"},axisTick:{length:0},axisLine:{lineStyle:{color:"#707070"}},data:this.pp},yAxis:{splitLine:{show:!0},offset:100,interval:150},visualMap:{top:10,right:10,showLabel:!1,show:!1,pieces:[{gt:0,lte:10,color:"rgb(73, 202, 137)"},{gt:10,lte:20,color:"rgb(255, 178, 62)"},{gt:20,lte:30,color:"#8d7eda"},{gt:30,color:"#57a3f3"}],outOfRange:{color:"blue"}},series:[{name:"访问来源",type:"bar",data:this.opinionData,lineStyle:{normal:{color:"#00a1e9",width:1}},barWidth:"20px",symbol:"circle",symbolSize:10,label:{normal:{show:!0,color:"#707070",position:"top",rotate:90,offset:[5,-10]}}}]})},drawPie:function(t){this.charts=o.a.init(document.getElementById(t)),this.charts.setOption({visualMap:{top:10,right:10,showLabel:!1,show:!1,pieces:[{gt:0,lte:100,color:"rgb(73, 202, 137)"},{gt:100,lte:200,color:"rgb(255, 178, 62)"},{gt:200,lte:400,color:"#8d7eda"},{gt:400,color:"#57a3f3"}],outOfRange:{color:"blue"}},series:[{name:"访问来源",type:"pie",radius:"60%",center:["50%","50%"],data:this.piedata}]})}}},s=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"record"},[a("div",{staticClass:"recordwrapper"},[a("p",{staticClass:"recordtitle"},[t._v("筛选条件")]),t._v(" "),t._l(t.requirements,function(n,e){return a("Row",{key:e,attrs:{"class-name":"recordrow"}},[a("Col",{staticStyle:{"padding-right":"10px"},attrs:{span:"4"}},[a("Select",{attrs:{placeholder:"请选择题目",filterable:""},on:{"on-change":t.choose},model:{value:n.qid,callback:function(a){t.$set(n,"qid",a)},expression:"question.qid"}},t._l(t.cityList,function(n){return a("Option",{key:n.qid,attrs:{value:n.qid}},[t._v(t._s(n.topic))])}))],1),t._v(" "),a("Col",{staticStyle:{"padding-right":"10px"},attrs:{span:"4"}},[a("Select",{attrs:{placeholder:"请选择逻辑",filterable:""},model:{value:n.para,callback:function(a){t.$set(n,"para",a)},expression:"question.para"}},[a("Option",{attrs:{value:"1"}},[t._v("包含")]),t._v(" "),a("Option",{attrs:{value:"0"}},[t._v("不包含")])],1)],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Select",{attrs:{placeholder:"请选择选项(可多选)",filterable:"",multiple:""},model:{value:n.okey,callback:function(a){t.$set(n,"okey",a)},expression:"question.okey"}},t._l(t.optionslist,function(n){return a("Option",{key:n.qid,attrs:{value:n.okey}},[t._v(t._s(n.option))])}))],1),t._v(" "),a("Col",{attrs:{span:"1"}},[a("div",{staticClass:"iconwrapper",on:{click:function(n){t.delechoose(e)}}},[a("Icon",{attrs:{type:"close"}})],1)])],1)}),t._v(" "),a("p",{staticClass:"recordadd",on:{click:t.addchoose}},[a("span",[t._v("+")]),t._v("添加条件")]),t._v(" "),a("p",{staticClass:"recordtitle"},[t._v("显示设置")]),t._v(" "),a("Row",{attrs:{"class-name":"recordrow"}},[a("Col",{attrs:{span:"8","class-name":"input11"}},[a("Select",{attrs:{placeholder:"请选择题目",filterable:""},on:{"on-change":t.change},model:{value:t.model11,callback:function(n){t.model11=n},expression:"model11"}},t._l(t.cityList,function(n){return a("Option",{key:n.qid,attrs:{value:n.qid}},[t._v(t._s(n.topic))])}))],1)],1),t._v(" "),a("div",{staticStyle:{"background-color":"#ccc",height:"1px"}}),t._v(" "),t.ischange?a("div",{staticClass:"questionwrapper"},[a("Row",[a("Col",{attrs:{span:"12","class-name":"titletext"}},[t._v("\n            题目："+t._s(t.model13)+"\n          ")]),t._v(" "),a("Col",{attrs:{offset:"2",span:"8","class-name":"titletext"}},[t._v("\n           题目类型："+t._s(t.sttype)+"\n         ")]),t._v(" "),a("Col",{attrs:{span:"2","class-name":"titletext"}},[t._v("\n           "+t._s(t.stnum)+"条数据\n         ")])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"13","class-name":"titletext"}},[a("div",{staticClass:"chartcard"},[a("Tabs",{staticClass:"chartwrapper",attrs:{value:"name1"}},[a("TabPane",{attrs:{label:"扇形图",name:"name1"}},[a("div",{attrs:{id:"pie"}})]),t._v(" "),a("TabPane",{attrs:{label:"条形图",name:"name2"}},[a("div",{attrs:{id:"bar"}})]),t._v(" "),a("TabPane",{attrs:{label:"折线图",name:"name3"}},[a("div",{attrs:{id:"line"}})])],1)],1)]),t._v(" "),a("Col",{attrs:{offset:"1",span:"10","class-name":"titletext"}},[a("div",{staticClass:"chartcard"},[a("div",{staticClass:"tablewrapper"},[a("table",{staticClass:"charttable"},[a("thead",[a("th",{staticClass:"toption"},[t._v("选项")]),t._v(" "),a("th",{staticClass:"tnum"},[t._v("数据量")]),t._v(" "),a("th",{staticClass:"tnum"},[t._v("占比")])]),t._v(" "),a("tbody",t._l(t.stoptions,function(n){return a("tr",[a("td",{staticClass:"doption"},[t._v(t._s(n.okey)+". "+t._s(n.option))]),t._v(" "),a("td",{staticClass:"dnum"},[t._v(t._s(n.count))]),t._v(" "),a("td",{staticClass:"dnum"},[t._v(t._s(n.proportion))])])}))])])])])],1)],1):t._e()],2)])},d=[],A={render:s,staticRenderFns:d},p=A,c=a("VU/8"),l=e,b=c(r,p,!1,l,"data-v-7bc3ba5d",null);n.default=b.exports},JkXs:function(t,n,a){n=t.exports=a("FZ+f")(!0),n.push([t.i,"\n.record[data-v-7bc3ba5d] {\n  min-height: 100%;\n  background-color: rgba(233,234,238,0.52);\n  position: relative;\n  top: 130px;\n  overflow-y: auto;\n}\n.recordwrapper[data-v-7bc3ba5d] {\n  max-width: 1100px;\n  min-height: 100%;\n  margin: 0 auto;\n  padding-top: 30px;\n  padding-bottom: 100px;\n  padding-left: 20px;\n  padding-right: 20px;\n}\n.recordtitle[data-v-7bc3ba5d] {\n  margin-bottom: 20px;\n  font-size: 15px;\n}\n.recordrow[data-v-7bc3ba5d] {\n  margin-bottom: 15px;\n}\n.recordadd span[data-v-7bc3ba5d] {\n  font-size: 20px;\n  position: relative;\n  top: 2px;\n}\n.recordadd[data-v-7bc3ba5d] {\n  color: #00a1e9;\n  font-size: 13px;\n  cursor: pointer;\n  margin-bottom: 20px;\n}\n.iconwrapper[data-v-7bc3ba5d] {\n  line-height: 32px;\n  vertical-align: middle;\n  font-size: 15px;\n  color: #707070;\n  margin-left: 18px;\n  cursor: pointer;\n}\n.imgwrapper img[data-v-7bc3ba5d] {\n  width: 30px;\n  margin-left: 14px;\n  cursor: pointer;\n}\n.imgwrapper[data-v-7bc3ba5d] {\n  vertical-align: middle;\n  position: relative;\n  top: 9px;\n}\n.smaller[data-v-7bc3ba5d] {\n  width: 23px !important;\n  position: relative;\n  bottom: 3px;\n}\n.sharetext[data-v-7bc3ba5d] {\n  font-size: 15px;\n  color: #707070;\n}\n.sharewrapper[data-v-7bc3ba5d] {\n  text-align: right;\n}\n.titletext[data-v-7bc3ba5d] {\n  margin-top: 20px;\n}\n.input11[data-v-7bc3ba5d] {\n  padding-right: 10px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.chartcard[data-v-7bc3ba5d] {\n  background-color: #fff;\n  border-radius: 2px;\n  border: 1px solid #dadada;\n  height: 400px;\n  padding: 10px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.choosetype[data-v-7bc3ba5d] {\n  position: absolute;\n  top: 5px;\n  left: 95px;\n}\n.choosetype span[data-v-7bc3ba5d] {\n  margin-left: 8px;\n  cursor: pointer;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.choosetype span[data-v-7bc3ba5d]:hover {\n  color: #00a1e9;\n}\n.choosetype img[data-v-7bc3ba5d] {\n  width: 15px;\n  position: relative;\n  top: 3px;\n  cursor: pointer;\n}\n#bar[data-v-7bc3ba5d] {\n  width: 240px;\n  height: 580px;\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n  position: relative;\n  bottom: 140px;\n  left: 190px;\n}\n#pie[data-v-7bc3ba5d] {\n  width: 100%;\n  height: 330px;\n}\n#line[data-v-7bc3ba5d] {\n  width: 100%;\n  height: 350px;\n  position: relative;\n  bottom: 30px;\n}\n.chartwrapper[data-v-7bc3ba5d] {\n  height: 400px;\n  width: 100%;\n}\n.tablewrapper[data-v-7bc3ba5d] {\n  max-height: 380px;\n  overflow-y: auto;\n  padding: 8px 10px;\n}\n.charttable[data-v-7bc3ba5d] {\n  width: 100%;\n  height: 100%;\n}\n.charttable thead[data-v-7bc3ba5d] {\n  border-bottom: 1px solid #dddee1;\n}\n.charttable tr[data-v-7bc3ba5d] {\n  border-bottom: 1px solid #dddee1;\n  height: 50px;\n  line-height: 50px;\n}\n.toption[data-v-7bc3ba5d] {\n  width: 50%;\n  text-align: left;\n  font-size: 15px;\n  height: 30px;\n}\n.tnum[data-v-7bc3ba5d] {\n  width: 25%;\n  text-align: center;\n  font-size: 15px;\n}\n.tpercent[data-v-7bc3ba5d] {\n  width: 25%;\n  text-align: center;\n}\n.doption[data-v-7bc3ba5d] {\n  font-size: 13px;\n}\n.dnum[data-v-7bc3ba5d] {\n  text-align: center;\n  font-size: 13px;\n}","",{version:3,sources:["/Users/yangshurui/files/twt/questionnaire/src/components/record/record.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,yCAAyC;EACzC,mBAAmB;EACnB,WAAW;EACX,iBAAiB;CAClB;AACD;EACE,kBAAkB;EAClB,iBAAiB;EACjB,eAAe;EACf,kBAAkB;EAClB,sBAAsB;EACtB,mBAAmB;EACnB,oBAAoB;CACrB;AACD;EACE,oBAAoB;EACpB,gBAAgB;CACjB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,mBAAmB;EACnB,SAAS;CACV;AACD;EACE,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,oBAAoB;CACrB;AACD;EACE,kBAAkB;EAClB,uBAAuB;EACvB,gBAAgB;EAChB,eAAe;EACf,kBAAkB;EAClB,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;CACjB;AACD;EACE,uBAAuB;EACvB,mBAAmB;EACnB,SAAS;CACV;AACD;EACE,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,gBAAgB;EAChB,eAAe;CAChB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,oBAAoB;EACpB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,uBAAuB;EACvB,mBAAmB;EACnB,0BAA0B;EAC1B,cAAc;EACd,cAAc;EACd,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,mBAAmB;EACnB,SAAS;EACT,WAAW;CACZ;AACD;EACE,iBAAiB;EACjB,gBAAgB;EAChB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,eAAe;CAChB;AACD;EACE,YAAY;EACZ,mBAAmB;EACnB,SAAS;EACT,gBAAgB;CACjB;AACD;EACE,aAAa;EACb,cAAc;EACd,iCAAiC;UACzB,yBAAyB;EACjC,mBAAmB;EACnB,cAAc;EACd,YAAY;CACb;AACD;EACE,YAAY;EACZ,cAAc;CACf;AACD;EACE,YAAY;EACZ,cAAc;EACd,mBAAmB;EACnB,aAAa;CACd;AACD;EACE,cAAc;EACd,YAAY;CACb;AACD;EACE,kBAAkB;EAClB,iBAAiB;EACjB,kBAAkB;CACnB;AACD;EACE,YAAY;EACZ,aAAa;CACd;AACD;EACE,iCAAiC;CAClC;AACD;EACE,iCAAiC;EACjC,aAAa;EACb,kBAAkB;CACnB;AACD;EACE,WAAW;EACX,iBAAiB;EACjB,gBAAgB;EAChB,aAAa;CACd;AACD;EACE,WAAW;EACX,mBAAmB;EACnB,gBAAgB;CACjB;AACD;EACE,WAAW;EACX,mBAAmB;CACpB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,mBAAmB;EACnB,gBAAgB;CACjB",file:"record.vue",sourcesContent:["\n.record[data-v-7bc3ba5d] {\n  min-height: 100%;\n  background-color: rgba(233,234,238,0.52);\n  position: relative;\n  top: 130px;\n  overflow-y: auto;\n}\n.recordwrapper[data-v-7bc3ba5d] {\n  max-width: 1100px;\n  min-height: 100%;\n  margin: 0 auto;\n  padding-top: 30px;\n  padding-bottom: 100px;\n  padding-left: 20px;\n  padding-right: 20px;\n}\n.recordtitle[data-v-7bc3ba5d] {\n  margin-bottom: 20px;\n  font-size: 15px;\n}\n.recordrow[data-v-7bc3ba5d] {\n  margin-bottom: 15px;\n}\n.recordadd span[data-v-7bc3ba5d] {\n  font-size: 20px;\n  position: relative;\n  top: 2px;\n}\n.recordadd[data-v-7bc3ba5d] {\n  color: #00a1e9;\n  font-size: 13px;\n  cursor: pointer;\n  margin-bottom: 20px;\n}\n.iconwrapper[data-v-7bc3ba5d] {\n  line-height: 32px;\n  vertical-align: middle;\n  font-size: 15px;\n  color: #707070;\n  margin-left: 18px;\n  cursor: pointer;\n}\n.imgwrapper img[data-v-7bc3ba5d] {\n  width: 30px;\n  margin-left: 14px;\n  cursor: pointer;\n}\n.imgwrapper[data-v-7bc3ba5d] {\n  vertical-align: middle;\n  position: relative;\n  top: 9px;\n}\n.smaller[data-v-7bc3ba5d] {\n  width: 23px !important;\n  position: relative;\n  bottom: 3px;\n}\n.sharetext[data-v-7bc3ba5d] {\n  font-size: 15px;\n  color: #707070;\n}\n.sharewrapper[data-v-7bc3ba5d] {\n  text-align: right;\n}\n.titletext[data-v-7bc3ba5d] {\n  margin-top: 20px;\n}\n.input11[data-v-7bc3ba5d] {\n  padding-right: 10px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.chartcard[data-v-7bc3ba5d] {\n  background-color: #fff;\n  border-radius: 2px;\n  border: 1px solid #dadada;\n  height: 400px;\n  padding: 10px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.choosetype[data-v-7bc3ba5d] {\n  position: absolute;\n  top: 5px;\n  left: 95px;\n}\n.choosetype span[data-v-7bc3ba5d] {\n  margin-left: 8px;\n  cursor: pointer;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.choosetype span[data-v-7bc3ba5d]:hover {\n  color: #00a1e9;\n}\n.choosetype img[data-v-7bc3ba5d] {\n  width: 15px;\n  position: relative;\n  top: 3px;\n  cursor: pointer;\n}\n#bar[data-v-7bc3ba5d] {\n  width: 240px;\n  height: 580px;\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n  position: relative;\n  bottom: 140px;\n  left: 190px;\n}\n#pie[data-v-7bc3ba5d] {\n  width: 100%;\n  height: 330px;\n}\n#line[data-v-7bc3ba5d] {\n  width: 100%;\n  height: 350px;\n  position: relative;\n  bottom: 30px;\n}\n.chartwrapper[data-v-7bc3ba5d] {\n  height: 400px;\n  width: 100%;\n}\n.tablewrapper[data-v-7bc3ba5d] {\n  max-height: 380px;\n  overflow-y: auto;\n  padding: 8px 10px;\n}\n.charttable[data-v-7bc3ba5d] {\n  width: 100%;\n  height: 100%;\n}\n.charttable thead[data-v-7bc3ba5d] {\n  border-bottom: 1px solid #dddee1;\n}\n.charttable tr[data-v-7bc3ba5d] {\n  border-bottom: 1px solid #dddee1;\n  height: 50px;\n  line-height: 50px;\n}\n.toption[data-v-7bc3ba5d] {\n  width: 50%;\n  text-align: left;\n  font-size: 15px;\n  height: 30px;\n}\n.tnum[data-v-7bc3ba5d] {\n  width: 25%;\n  text-align: center;\n  font-size: 15px;\n}\n.tpercent[data-v-7bc3ba5d] {\n  width: 25%;\n  text-align: center;\n}\n.doption[data-v-7bc3ba5d] {\n  font-size: 13px;\n}\n.dnum[data-v-7bc3ba5d] {\n  text-align: center;\n  font-size: 13px;\n}"],sourceRoot:""}])},R3Hx:function(t,n,a){var e=a("JkXs");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a("rjj0")("62496af6",e,!0)}});
//# sourceMappingURL=record.565ce81a25e70727d815.js.map